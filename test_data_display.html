<!DOCTYPE html>
<html>
<head>
    <title>测试数据展示</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>测试数据展示</h1>
    <div>
        <h2>当前值</h2>
        <p>CPU: <span id="cpu">0</span>%</p>
        <p>内存: <span id="memory">0</span>MB</p>
        <p>线程数: <span id="threads">0</span></p>
        <p>FPS: <span id="fps">0</span></p>
    </div>
    
    <div>
        <h2>收到的数据</h2>
        <pre id="data-log"></pre>
    </div>

    <script>
        const socket = io('http://localhost:5002');
        
        socket.on('connect', function() {
            console.log('已连接到服务器');
            document.body.style.backgroundColor = '#ccffcc';
        });
        
        socket.on('disconnect', function() {
            console.log('与服务器断开连接');
            document.body.style.backgroundColor = '#ffcccc';
        });
        
        socket.on('performance_data', function(data) {
            console.log('收到性能数据:', data);
            document.getElementById('cpu').textContent = data.cpu;
            document.getElementById('memory').textContent = data.memory.toFixed(1);
            document.getElementById('threads').textContent = data.threads;
            
            // 记录数据
            const logEl = document.getElementById('data-log');
            logEl.textContent = JSON.stringify(data, null, 2) + '\n' + logEl.textContent;
        });
        
        socket.on('fps_data', function(data) {
            console.log('收到FPS数据:', data);
            document.getElementById('fps').textContent = data.fps;
            
            // 记录数据
            const logEl = document.getElementById('data-log');
            logEl.textContent = JSON.stringify(data, null, 2) + '\n' + logEl.textContent;
        });
    </script>
</body>
</html>